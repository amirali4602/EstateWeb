@model Estate.Models.Page

@{
    ViewData["Title"] = "ویرایش آگهی";
}
@section Styles {
    <!-- Demo styles -->
    <style>
        .swiper {
            width: 100%;
            height: 100%;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

            .swiper-slide img {
                display: block;
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

        .swiper {
            width: 100%;
            height: 300px;
            margin-left: auto;
            margin-right: auto;
        }

        .swiper-slide {
            background-size: cover;
            background-position: center;
        }

        .mySwiper2 {
            height: 500px;
            width: 100%;
        }

        .mySwiper {
            height: 100px;
            box-sizing: border-box;
            padding: 10px 0;
        }

            .mySwiper .swiper-slide {
                width: 25%;
                height: 100%;
                opacity: 0.4;
            }

            .mySwiper .swiper-slide-thumb-active {
                opacity: 1;
            }

        .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
}

<div class=" container mt-c mw-500">
    <div class="card shadow border-0 mt-5">
        <div class="card-header bg-primary bg-gradient ml-0 py-4">
            <div class="row">
                <div class="col-12 text-center">
                    <h1 class="py-2 text-white fs-4">@ViewData["Title"]</h1>
                </div>
            </div>
        </div>
        <div class="card-body p-4">
            <div class="row">
                <div class="col-md-12">
                    <!-- Swiper -->

                    <div style="--swiper-navigation-color: #fff; --swiper-pagination-color: #fff" class="swiper mySwiper2">
                        <div class="swiper-wrapper">
                            @{
                                if (string.IsNullOrEmpty(Model.ImageUrl) != true)
                                {
                                    <div class="swiper-slide">

                                        <img loading="lazy" src="@(Model.ImageUrl)" alt="@Model.Title" class="cropped-ofp-property" />
                                    </div>
                                }
                                if (Model.Gallery != null)
                                {
                                    var galleryList = Model.Gallery.Split(" ");
                                    foreach (var g in galleryList)
                                    {
                                        <div class="swiper-slide">
                                            <img loading="lazy" src="@g" alt="@Model.Title" class="cropped-ofp-property" />
                                        </div>
                                    }
                                }

                            }
                        </div>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                    </div>
                    <div thumbsSlider="" class="swiper mySwiper">
                        <div class="swiper-wrapper">

                            @{
                                if (string.IsNullOrEmpty(Model.ImageUrl) != true)
                                {
                                    <div class="swiper-slide">

                                        <img loading="lazy" src="@(Model.ImageUrl)" alt="@Model.Title" class="cropped-ofp-property" />
                                    </div>
                                }
                                if (Model.Gallery != null)
                                {
                                    var galleryList = Model.Gallery.Split(" ");
                                    foreach (var g in galleryList)
                                    {
                                        <div class="swiper-slide">
                                            <img loading="lazy" src="@g" alt="@Model.Title" class="cropped-ofp-property" />
                                        </div>
                                    }
                                }

                            }
                        </div>
                    </div>
                    <section>
                        
                        <form asp-action="Edit" method="post" enctype="multipart/form-data">
                            <input asp-for="ImageUrl" hidden />
                            <input asp-for="Gallery" hidden />
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                            <input type="hidden" asp-for="PageId" />
                            <div class="form-group">
                                <label asp-for="CategoryId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="CategoryId" class="form-control" asp-items="ViewBag.CategoryId"></select>
                                <span asp-validation-for="CategoryId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="ImageUrl" class="control-label mb-3 text-primary"></label>
                                <input type="file" class="form-control" accept="capture=camera,image/*" id="upload" oninput="process()" />

                                <div>
                                    <img id="output" />
                                </div>
                            </div>
                            <input type="hidden" name="base64Image" id="base64Image" />
                            <div class="form-group">
                                <label asp-for="Gallery" class="control-label mb-3 text-primary"></label>
                                <input type="file" id="uploades" name="files" class="form-control" multiple accept="capture=camera,image/*" oninput="processall()" />

                            </div>
                            <div id="fileList"></div>

                            <div id="outputes">
                            </div>
                            <input type="hidden" name="base64Images" id="base64Images" />

                            <div class="form-group">
                                <label asp-for="Title" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Title" class="form-control" />
                                <span asp-validation-for="Title" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Address" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Address" class="form-control" />
                                <span asp-validation-for="Address" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Description" class="control-label mb-3 text-primary"></label>
                                <textarea asp-for="Description" class="form-control" style="min-height: 10.5rem;"></textarea>
                            </div>
                            <div class="form-group">
                                <label asp-for="PriceTotal" class="control-label mb-3 text-primary"></label>
                                <input asp-for="PriceTotal" class="form-control" />
                                <span asp-validation-for="PriceTotal" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="PriceMeter" class="control-label mb-3 text-primary"></label>
                                <input asp-for="PriceMeter" class="form-control" />
                                <span asp-validation-for="PriceMeter" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Meterage" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Meterage" class="form-control" />
                                <span asp-validation-for="Meterage" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Deposit" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Deposit" class="form-control" />
                                <span asp-validation-for="Deposit" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Rent" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Rent" class="form-control" />
                                <span asp-validation-for="Rent" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Year" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Year" class="form-control" />
                                <span asp-validation-for="Year" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Rooms" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Rooms" class="form-control" />
                                <span asp-validation-for="Rooms" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Floor" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Floor" class="form-control" />
                                <span asp-validation-for="Floor" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Units" class="control-label mb-3 text-primary"></label>
                                <input asp-for="Units" class="form-control" />
                                <span asp-validation-for="Units" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="TotalFloors" class="control-label mb-3 text-primary"></label>
                                <input asp-for="TotalFloors" class="form-control" />
                                <span asp-validation-for="TotalFloors" class="text-danger"></span>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="Elevator" /> @Html.DisplayNameFor(model => model.Elevator)
                                </label>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="Parking" /> @Html.DisplayNameFor(model => model.Parking)
                                </label>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="StoreRoom" /> @Html.DisplayNameFor(model => model.StoreRoom)
                                </label>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="Balcony" /> @Html.DisplayNameFor(model => model.Balcony)
                                </label>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="Restored" /> @Html.DisplayNameFor(model => model.Restored)
                                </label>
                            </div>
                            <div class="form-group">
                                <label asp-for="DocumentTypeId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="DocumentTypeId" class="form-control" asp-items="ViewBag.DocumentTypeId"></select>
                                <span asp-validation-for="DocumentTypeId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="BuildingDirectionId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="BuildingDirectionId" class="form-control" asp-items="ViewBag.BuildingDirectionId"></select>
                                <span asp-validation-for="BuildingDirectionId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="ToiletId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="ToiletId" class="form-control" asp-items="ViewBag.ToiletId"></select>
                                <span asp-validation-for="ToiletId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="CoolingId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="CoolingId" class="form-control" asp-items="ViewBag.CoolingId"></select>
                                <span asp-validation-for="CoolingId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="HeatingId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="HeatingId" class="form-control" asp-items="ViewBag.HeatingId"></select>
                                <span asp-validation-for="HeatingId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="HotWaterSupplierId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="HotWaterSupplierId" class="form-control" asp-items="ViewBag.HotWaterSupplierId"></select>
                                <span asp-validation-for="HotWaterSupplierId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="FloorMaterialId" class="control-label mb-3 text-primary"></label>
                                <select asp-for="FloorMaterialId" class="form-control" asp-items="ViewBag.FloorMaterialId"></select>
                                <span asp-validation-for="FloorMaterialId" class="text-danger"></span>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="isActive" /> @Html.DisplayNameFor(model => model.isActive)
                                </label>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="isFeatured" /> @Html.DisplayNameFor(model => model.isFeatured)
                                </label>
                            </div>
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="isRent" /> @Html.DisplayNameFor(model => model.isRent)
                                </label>
                            </div>
                            
                            <div class="form-group form-check form-switch mb-3">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="Sold" /> @Html.DisplayNameFor(model => model.Sold)
                                </label>
                            </div>

                            <div class="form-group">
                                <label asp-for="CustomerNumber" class="control-label mb-3 text-primary"></label>
                                <input asp-for="CustomerNumber" class="form-control" />
                                <span asp-validation-for="CustomerNumber" class="text-danger"></span>
                            </div>

                            <div class="form-group">
                                <label asp-for="AdsMessage" class="control-label mb-3 text-primary"></label>
                                <input asp-for="AdsMessage" class="form-control" />
                            </div>
                            <div class="form-group">
                                <input type="submit" value="ثبت تغییرات" class="btn btn-primary" />
                            </div>
                        </form>
                        <div>
                            <a asp-action="Index">بازگشت</a>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        let slideIndex = 1;
        showSlides(slideIndex);

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("mySlides");
            let dots = document.getElementsByClassName("demo");
            let captionText = document.getElementById("caption");
            if (n > slides.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = slides.length }
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" active", "");
            }
            slides[slideIndex - 1].style.display = "block";
            dots[slideIndex - 1].className += " active";
            captionText.innerHTML = dots[slideIndex - 1].alt;
        }
    </script>
    <script src="~/lib//jquery/dist/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script>

        const MAX_FILES = 20; // Maximum number of files allowed


        document.getElementById('uploades').addEventListener('change', function () {

            const files = this.files;

            const fileList = document.getElementById('fileList');


            // Clear existing file list

            fileList.innerHTML = '';


            // Check if the number of selected files exceeds the maximum limit
            // Disable the input if the maximum files are selected

            if (files.length > MAX_FILES) {

                toastr.error(`حداکثر ${MAX_FILES} .عدد عکس مجاز است`);


                this.value = ''; // Clear the input

                return;

            }


        });
    </script>
    <script src="~/js/optimizer.js"></script>

    <!-- Swiper JS -->
    <script src="/lib/Swiper/Swiper.js"></script>

    <!-- Initialize Swiper -->
    <script>
        var swiper = new Swiper(".mySwiper", {
            loop: true,
            spaceBetween: 10,
            slidesPerView: 4,
            freeMode: true,
            watchSlidesProgress: true,
        });
        var swiper2 = new Swiper(".mySwiper2", {
            loop: true,
            spaceBetween: 10,
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            thumbs: {
                swiper: swiper,
            },
        });
    </script>

    <script src="https://cdn.tiny.cloud/1/xc1furjetoq69vi18jmr01fd433nexfd2fbg21ej7enz242s/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: 'textarea',
            plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
            toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
            language: 'fa'
        });
    </script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
